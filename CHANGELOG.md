# Changelog

## [Не выпущено] - fix/port-and-proxy-errors

### Исправлено
- **Конфликт портов**: Изменен порт API сервера с 5000 на 5001 для избежания конфликта с AirPlay на macOS
- **Синтаксическая ошибка**: Исправлена ошибка синтаксиса в simple-proxy.js (лишняя закрывающая скобка)
- **Ссылка на несуществующий файл**: Исправлен start-full.bat для использования simple-proxy.js вместо proxy-server.js
- **Динамические порты**: API сервер теперь пробует порты 5001-5010 и сохраняет выбранный порт в api_port.txt
- **Прокси-конфигурация**: simple-proxy.js читает порт API из api_port.txt
- **Неправильный путь API**: Исправлен путь к API endpoint в graph-manager.js с `/generate-model` на `/api/generate-model`
- **Документация**: Обновлены README-STRICT.md, cleanup.command и RUN_OLD.command для отражения изменений портов
- **Очистка процессов**: Скрипты очистки теперь проверяют правильные порты (3000 и 5001)

### Измененные файлы
- `api.py` - изменен диапазон портов с 5000-5009 на 5001-5010
- `simple-proxy.js` - исправлен синтаксис, изменен порт по умолчанию на 5001
- `proxy-fixed.js` - изменен порт по умолчанию на 5001
- `start-full.bat` - исправлен для использования simple-proxy.js
- `README-STRICT.md` - обновлены ссылки на порт 5001
- `cleanup.command` - обновлен для проверки порта 5001
- `RUN_OLD.command` - обновлен для проверки порта 5001

### Как тестировалось
1. Проверено, что API сервер запускается на свободном порте (5004 в тесте)
2. Проверено, что прокси-сервер запускается на порту 3000
3. Проверено, что запрос `http://localhost:3000/api/health` возвращает корректный ответ от API
4. Устранена исходная ошибка: "❌ Прокси недоступен: Прокси отвечает с ошибкой: 404"

### Зависимости
- Node.js ≥ 14 (установлен v24.13.0)
- Python ≥ 3.6 (установлен 3.9.6)

### Примечания
Для работы системы необходимо:
1. Установить Node.js (если не установлен)
2. Запустить `python3 api.py` для API сервера
3. Запустить `node simple-proxy.js` для прокси-сервера
4. Открыть `http://localhost:3000/proxy-index.html` в браузере