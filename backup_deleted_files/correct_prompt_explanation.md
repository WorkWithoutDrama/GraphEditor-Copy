# Исправленный промпт для AI API

## Требования:
1. Найти ОДНО основное действие в описании
2. Определить список начальных условий (объекты и их состояния), необходимых для выполнения действия
3. Определить список конечных условий (объекты и их состояния), наступающих после выполнения действия
4. Если действия, объекта или его состояния еще нет в модели - добавить их
5. Сформировать "model_connections" для связей

## Правила отрисовки графа:
- **Действия** → прямоугольники (используют action_id: "a" + 5 цифр)
- **Объект + состояние** → овалы (используют составной ID: object_id + state_id)
- **Стрелки** → connection_out (источник) → connection_in (цель)

## Идентификаторы:
1. action_id: "a" + 5 цифр (пример: "a00001")
2. object_id: "o" + 5 цифр (пример: "o00001") 
3. state_id: "s" + 5 цифр (пример: "s00001")
4. Составной ID для состояния: object_id + state_id (пример: "o00001s00001")

## Правила для model_connections:
- **connection_out** может быть:
  - Состоянием (составной ID: object_id + state_id) → ведет к действию
  - Действием (action_id) → ведет к состоянию
- **connection_in** может быть:
  - Действием (action_id) ← идет от состояния
  - Состоянием (составной ID) ← идет от действия

## Пример связей:
1. Начальное состояние → Действие:
```json
{
  "connection_out": "o00001s00001",
  "connection_in": "a00001"
}
```

2. Действие → Конечное состояние:
```json
{
  "connection_out": "a00001",
  "connection_in": "o00001s00002"
}
```

## Полный пример JSON:
```json
{
  "model_actions": [
    {
      "action_id": "a00001",
      "action_name": "Регистрация пользователя",
      "action_links": {"manual": "", "API": "", "UI": ""}
    }
  ],
  "model_objects": [
    {
      "object_id": "o00001",
      "object_name": "Пользователь",
      "resource_state": [
        {"state_id": "s00001", "state_name": "незарегистрирован"},
        {"state_id": "s00002", "state_name": "зарегистрирован"}
      ],
      "object_links": {"manual": "", "API": "", "UI": ""}
    }
  ],
  "model_connections": [
    {
      "connection_out": "o00001s00001",
      "connection_in": "a00001"
    },
    {
      "connection_out": "a00001",
      "connection_in": "o00001s00002"
    }
  ]
}
```