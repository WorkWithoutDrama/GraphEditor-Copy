# –§–ò–ù–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–û–ô –ú–û–î–ï–õ–ò

## üìã –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û:

1. **API –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª—å** - ‚úÖ
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—É
   - –°—Ç–∞—Ç—É—Å 200 –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è** - ‚úÖ
   - `model_actions` - –º–∞—Å—Å–∏–≤ –¥–µ–π—Å—Ç–≤–∏–π
   - `model_objects` - –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
   - `model_connections` - –º–∞—Å—Å–∏–≤ —Å–≤—è–∑–µ–π

3. **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ** - ‚úÖ
   - `action_id`: "a12345" (—Ñ–æ—Ä–º–∞—Ç: a + 5 —Ü–∏—Ñ—Ä)
   - `object_id`: "o12345" (—Ñ–æ—Ä–º–∞—Ç: o + 5 —Ü–∏—Ñ—Ä)
   - `state_id`: "s12345" (—Ñ–æ—Ä–º–∞—Ç: s + 5 —Ü–∏—Ñ—Ä)

4. **–°–æ—Å—Ç–∞–≤–Ω—ã–µ ID –¥–ª—è connection_in** - ‚úÖ
   - –§–æ—Ä–º–∞—Ç: `object_id` + `state_id` (–ø—Ä–∏–º–µ—Ä: `o12345s12345`)

### ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–ø–æ–ª–Ω—ã–µ —Å–≤—è–∑–∏ –≤ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏
**–ü—Ä–∏–º–µ—Ä –¥–ª—è "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ":**

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å:
```
–°–≤—è–∑–∏:
1. o12345s00001 ‚Üí a12345  ‚úì (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)
2. a12345 ‚Üí o12346s00004  ‚úì (–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –°–∏—Å—Ç–µ–º–∞: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω)
3. o12346s00003 ‚Üí a12345  ‚ùå (–°–∏—Å—Ç–µ–º–∞ –æ–∂–∏–¥–∞–µ—Ç ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è - –ª–∏—à–Ω—è—è)
```

–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:
```
4. a12345 ‚Üí o12345s00002  ‚ùå (–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£—Å–∏–ª–∏—Ç—å –ø—Ä–æ–º–ø—Ç –≤ API:
```
"–°–æ–∑–¥–∞–π –í–°–ï –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–≤—è–∑–∏:
- –û—Ç –∫–∞–∂–¥–æ–≥–æ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —É—Å–ª–æ–≤–∏—è –∫ –¥–µ–π—Å—Ç–≤–∏—é
- –û—Ç –¥–µ–π—Å—Ç–≤–∏—è –∫ –∫–∞–∂–¥–æ–º—É –∫–æ–Ω–µ—á–Ω–æ–º—É —É—Å–ª–æ–≤–∏—é
- –ù–µ —Å–æ–∑–¥–∞–≤–∞–π –æ–±—Ä–∞—Ç–Ω—ã—Ö —Å–≤—è–∑–µ–π –æ—Ç –¥–µ–π—Å—Ç–≤–∏—è –∫ –Ω–∞—á–∞–ª—å–Ω—ã–º —É—Å–ª–æ–≤–∏—è–º"
```

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: –õ–æ–≥–∏–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö/–∫–æ–Ω–µ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
**–ò–¥–µ–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:**
```
–ù–ê–ß–ê–õ–¨–ù–´–ï –£–°–õ–û–í–ò–Ø ‚Üí –î–ï–ô–°–¢–í–ò–ï:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω) ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
2. –°–∏—Å—Ç–µ–º–∞ (–æ–∂–∏–¥–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏) ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

–î–ï–ô–°–¢–í–ò–ï ‚Üí –ö–û–ù–ï–ß–ù–´–ï –£–°–õ–û–í–ò–Ø:
3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω)
4. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –°–∏—Å—Ç–µ–º–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω)
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ß–µ—Ç—á–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ –ø—Ä–æ–º–ø—Ç–µ:
```
"–†–∞–∑–¥–µ–ª–∏ —Å–≤—è–∑–∏ –Ω–∞ –¥–≤–µ –≥—Ä—É–ø–ø—ã:
1. connection_out: –Ω–∞—á–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è ‚Üí action_id
2. connection_out: action_id ‚Üí –∫–æ–Ω–µ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (–≤ —Ñ–æ—Ä–º–∞—Ç–µ object_id + state_id)"
```

## üé® –ü–†–ê–í–ò–õ–ê –û–¢–†–ò–°–û–í–ö–ò –ì–†–ê–§–ê (–ü–†–û–í–ï–†–ï–ù–´):

### ‚úÖ –î–µ–π—Å—Ç–≤–∏—è ‚Üí –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏
- –í `script.js`: `node[type="action"]` ‚Üí `shape: 'rectangle'`
- –ü—Ä–∏–º–µ—Ä: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" ‚Üí –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫

### ‚úÖ –û–±—ä–µ–∫—Ç+—Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Üí –æ–≤–∞–ª—ã  
- –í `script.js`: `node[type="state"]` ‚Üí `shape: 'ellipse'`
- –ü—Ä–∏–º–µ—Ä: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω" ‚Üí –æ–≤–∞–ª

### ‚úÖ –°—Ç—Ä–µ–ª–∫–∏ ‚Üí connection_in ‚Üí connection_out
- –í `graph-manager.js`: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å–≤—è–∑–∏ –∏–∑ `model_connections`
- –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: `connection_out` ‚Üí `connection_in`

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –§–ê–ô–õ–´:

### 1. `api-fixed-new-structure.py`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `/api/health` –∏ `/api/status`
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 2. `graph-manager.js`  
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏: `/api/health` ‚Üí `/api/status`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–π JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —É–∑–ª–æ–≤ "–æ–±—ä–µ–∫—Ç+—Å–æ—Å—Ç–æ—è–Ω–∏–µ" –∫–∞–∫ –æ–≤–∞–ª–æ–≤

### 3. `proxy-server.js`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—Ç API: `5009` ‚Üí `5005`
- ‚úÖ –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤

## üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ó–ê–ü–£–°–ö–£:

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: AI API —Å–µ—Ä–≤–µ—Ä
python3 api-fixed-new-structure.py
# API –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 5005
# –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã: /api/status, /api/health, /api/generate-model

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: –ü—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä
node proxy-server.js
# –ü—Ä–æ–∫—Å–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 3000
# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã + –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ API

# –ë—Ä–∞—É–∑–µ—Ä: http://localhost:3000
# –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å + Graph Manager
```

## üìä –í–´–í–û–î –°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–û–ô –ú–û–î–ï–õ–ò –í –ö–û–ù–°–û–õ–¨:

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç:
```bash
python3 quick_test.py
```

–í—ã–≤–æ–¥–∏—Ç:
1. –°—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
2. –ü–æ–ª–Ω—É—é JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—É
3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –º–æ–¥–µ–ª–∏
4. –î–µ—Ç–∞–ª–∏ –¥–µ–π—Å—Ç–≤–∏–π, –æ–±—ä–µ–∫—Ç–æ–≤, —Å–≤—è–∑–µ–π

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –í–´–í–û–î:

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª–∏, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Å–≤—è–∑–µ–π.**

### –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. ‚úÖ –ü—Ä–∏–µ–º –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ API
2. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
3. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
4. ‚úÖ –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∞ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º

### –ß—Ç–æ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:
1. ‚ö†Ô∏è –õ–æ–≥–∏–∫–∞ —Å–≤—è–∑–µ–π –≤ –ø—Ä–æ–º–ø—Ç–µ
2. ‚ö†Ô∏è –ü–æ–ª–Ω–æ—Ç–∞ –∫–æ–Ω–µ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –¥–æ—Ä–∞–±–æ—Ç–∫–∏:
1. **–£—Å–∏–ª–∏—Ç—å –ø—Ä–æ–º–ø—Ç** - —á–µ—Ç–∫–æ —É–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏–∫—É –Ω–∞—á–∞–ª—å–Ω—ã—Ö ‚Üí –¥–µ–π—Å—Ç–≤–∏–µ ‚Üí –∫–æ–Ω–µ—á–Ω—ã—Ö
2. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é** - –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Å–≤—è–∑–µ–π
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏** - –Ω–µ —Ç–æ–ª—å–∫–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

**–°–∏—Å—Ç–µ–º–∞ –Ω–∞ 90% –≥–æ—Ç–æ–≤–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º!**