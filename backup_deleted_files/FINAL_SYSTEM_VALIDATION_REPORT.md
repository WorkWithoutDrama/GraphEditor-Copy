# –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ –ü–û –ü–†–û–í–ï–†–ö–ï –°–ò–°–¢–ï–ú–´

## üìã –û–ë–©–ò–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø:

–ü—Ä–æ–º–ø—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–∫:
1. **–ù–∞—Ö–æ–¥–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ** –∏ —Å–ø–∏—Å–æ–∫ –Ω–∞—á–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π (–æ–±—ä–µ–∫—Ç—ã –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è), –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è
2. **–ù–∞—Ö–æ–¥–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–Ω–µ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π** (–æ–±—ä–µ–∫—Ç—ã –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è), –Ω–∞—Å—Ç—É–ø–∞—é—â–∏—Ö –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è
3. **–ï—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏—è, –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –µ—â–µ –Ω–µ—Ç –≤ –º–æ–¥–µ–ª–∏** - –¥–æ–±–∞–≤–ª—è—Ç—å –≤ JSON
4. **–§–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å "model_connections"** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–≤—è–∑–∏
5. **–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∞**: –¥–µ–π—Å—Ç–≤–∏—è –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞—Ö, –æ–±—ä–µ–∫—Ç+—Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –æ–≤–∞–ª–µ, —Å—Ç—Ä–µ–ª–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç "connection_in" (–Ω–∞—á–∞–ª–æ) ‚Üí "connection_out" (–∫–æ–Ω–µ—Ü)

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–û–í–ï–†–ö–ò:

### 1. –ü–†–û–ú–ü–¢ (api-fixed-new-structure.py)
- ‚úÖ **–ù–∞—Ö–æ–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–µ**: "–ù–∞–π–¥–∏ –û–î–ù–û –æ—Å–Ω–æ–≤–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏"
- ‚úÖ **–ù–∞—á–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è**: "–û–ø—Ä–µ–¥–µ–ª–∏ —Å–ø–∏—Å–æ–∫ –Ω–∞—á–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π (–æ–±—ä–µ–∫—Ç—ã –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è)"
- ‚úÖ **–ö–æ–Ω–µ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è**: "–û–ø—Ä–µ–¥–µ–ª–∏ —Å–ø–∏—Å–æ–∫ –∫–æ–Ω–µ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π (–æ–±—ä–µ–∫—Ç—ã –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è)"
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤**: "–ï—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏—è, –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –µ—â–µ –Ω–µ—Ç –≤ –º–æ–¥–µ–ª–∏ - –¥–æ–±–∞–≤—å –∏—Ö"
- ‚úÖ **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–µ–π**: "–°—Ñ–æ—Ä–º–∏—Ä—É–π 'model_connections' –¥–ª—è —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏"
- ‚úÖ **–ü—Ä–∞–≤–∏–ª–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏**: 
  - "–î–µ–π—Å—Ç–≤–∏—è –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—é—Ç—Å—è –≤ –ü–†–Ø–ú–û–£–ì–û–õ–¨–ù–ò–ö–ê–•"
  - "–û–±—ä–µ–∫—Ç + —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤ –û–í–ê–õ–ï"
- ‚úÖ **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã**:
  - action_id: "a" + 5 —Ü–∏—Ñ—Ä
  - object_id: "o" + 5 —Ü–∏—Ñ—Ä
  - state_id: "s" + 5 —Ü–∏—Ñ—Ä
  - –°–æ—Å—Ç–∞–≤–Ω–æ–π ID –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è: object_id + state_id

### 2. JSON –°–¢–†–£–ö–¢–£–†–ê (—Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã)
–ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —Ñ–∞–π–ª—ã:
- ‚úÖ `test_—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.json`
- ‚úÖ `test_–æ–ø–ª–∞—Ç–∞_–∑–∞–∫–∞–∑–∞.json` 
- ‚úÖ `test_—Å–æ–∑–¥–∞–Ω–∏–µ_–¥–æ–∫—É–º–µ–Ω—Ç–∞.json`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è:**
- `model_actions`: –º–∞—Å—Å–∏–≤ –¥–µ–π—Å—Ç–≤–∏–π —Å action_id, action_name
- `model_objects`: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å object_id, object_name, resource_state
- `model_connections`: –º–∞—Å—Å–∏–≤ —Å–≤—è–∑–µ–π —Å connection_out, connection_in

### 3. –û–¢–†–ò–°–û–í–ö–ê –ì–†–ê–§–ê (script.js)
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞**: –õ–æ–≥–∏–∫–∞ –¥–ª—è `model_actions`, `model_objects`, `model_connections`
- ‚úÖ **–¢–∏–ø—ã —É–∑–ª–æ–≤**: `node[type="action"]` (–ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏), `node[type="state"]` (–æ–≤–∞–ª—ã)
- ‚úÖ **–°–æ—Å—Ç–∞–≤–Ω—ã–µ ID**: `obj.object_id + state.state_id` –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π
- ‚úÖ **–°–≤—è–∑–∏**: `connection_out` ‚Üí `connection_in`

### 4. –†–ê–ë–û–¢–ê –° –¢–ó (exam.txt)
- ‚úÖ **–§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç**: `exam.txt` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è
- ‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å**: –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω –ª—é–±—ã–º –¥—Ä—É–≥–∏–º –¢–ó
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –£–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ `project_model.json` –∫–∞–∫ –æ—Å–Ω–æ–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞

## üé® –ü–†–ê–í–ò–õ–ê –û–¢–†–ò–°–û–í–ö–ò –ì–†–ê–§–ê (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã):

### –î–µ–π—Å—Ç–≤–∏—è ‚Üí –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏
```javascript
{ selector: 'node[type="action"]', style: {
    'shape': 'rectangle',
    'background-color': '#e6f7ff'
}}
```

### –û–±—ä–µ–∫—Ç—ã + –°–æ—Å—Ç–æ—è–Ω–∏—è ‚Üí –û–≤–∞–ª—ã
```javascript
{ selector: 'node[type="state"]', style: {
    'shape': 'ellipse', 
    'background-color': '#f6ffed'
}}
```

### –°–≤—è–∑–∏ ‚Üí –°—Ç—Ä–µ–ª–∫–∏
```javascript
// connection_out ‚Üí connection_in
edges.push({
    data: {
        source: conn.connection_out,
        target: conn.connection_in
    }
})
```

## üîó –ü–†–ò–ú–ï–† –ü–†–ê–í–ò–õ–¨–ù–´–• –°–í–Ø–ó–ï–ô:

### –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Üí –î–µ–π—Å—Ç–≤–∏–µ
```json
{
  "connection_out": "o00001s00001",
  "connection_in": "a00001"
}
```

### –î–µ–π—Å—Ç–≤–∏–µ ‚Üí –ö–æ–Ω–µ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```json
{
  "connection_out": "a00001",
  "connection_in": "o00001s00002"
}
```

## üöÄ –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´:

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
1. **API –°–µ—Ä–≤–µ—Ä** (`api-fixed-new-structure.py`):
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JSON –º–æ–¥–µ–ª—å —á–µ—Ä–µ–∑ LLM
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç

2. **–ü—Ä–æ–∫—Å–∏ –°–µ—Ä–≤–µ—Ä** (`proxy-server.js`):
   - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
   - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç CORS

3. **–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å** (`script.js`, `graph-manager.js`):
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–º–ø—Ç—ã –≤ API
   - –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –≥—Ä–∞—Ñ—ã
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç JSON –º–æ–¥–µ–ª—å

4. **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** (`exam.txt`, —Ç–µ—Å—Ç–æ–≤—ã–µ JSON):
   - –ü—Ä–∏–º–µ—Ä –¢–ó –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
   - –¢–µ—Å—Ç–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢:

**‚úÖ –°–ò–°–¢–ï–ú–ê –ü–û–õ–ù–û–°–¢–¨–Æ –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢ –¢–†–ï–ë–û–í–ê–ù–ò–Ø–ú:**

1. **–ü—Ä–æ–º–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ**:
   - –ù–∞—Ö–æ–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–µ, –Ω–∞—á–∞–ª—å–Ω—ã–µ –∏ –∫–æ–Ω–µ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
   - –î–æ–±–∞–≤–ª—è–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
   - –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–≤—è–∑–∏

2. **JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è**:
   - `model_actions`, `model_objects`, `model_connections`
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
   - –°–æ—Å—Ç–∞–≤–Ω—ã–µ ID –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π

3. **–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç**:
   - –î–µ–π—Å—Ç–≤–∏—è ‚Üí –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏
   - –°–æ—Å—Ç–æ—è–Ω–∏—è ‚Üí –æ–≤–∞–ª—ã  
   - –°—Ç—Ä–µ–ª–∫–∏ ‚Üí connection_out ‚Üí connection_in

4. **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ**:
   - –ú–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ª—é–±–æ–µ –¢–ó (exam.txt –∏–ª–∏ –¥—Ä—É–≥–æ–µ)
   - –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
   - –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

## üîß –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ó–ê–ü–£–°–ö–£:

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å API —Å–µ—Ä–≤–µ—Ä
python3 api-fixed-new-structure.py

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä  
node proxy-server.js

# 3. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open proxy-index.html
```

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**