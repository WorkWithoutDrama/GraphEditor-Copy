<!DOCTYPE html>
<html>
<head>
    <title>Quick Test</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        button { margin: 10px; padding: 10px 20px; }
        #test { margin: 20px; padding: 20px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>Быстрый тест GraphManager</h1>
    
    <div id="test">
        <!-- Минимальные DOM элементы -->
        <button id="graphManagerButton">Graph Manager</button>
        <div id="chatContainer" style="display: none; width: 400px; border: 1px solid #ccc; padding: 10px;">
            <div id="chatMessages" style="height: 200px; overflow-y: auto;"></div>
            <textarea id="chatInput" style="width: 100%;"></textarea>
            <button id="sendMessageBtn">Отправить</button>
            <button id="closeChatBtn">Закрыть</button>
            <div id="resizer" style="width: 10px; background: #ccc;"></div>
        </div>
    </div>
    
    <div id="result" style="margin: 20px; padding: 20px; background: #f0f0f0;"></div>
    
    <script src="graph-manager.js"></script>
    
    <script>
        function log(message) {
            const result = document.getElementById('result');
            result.innerHTML += '<div>' + message + '</div>';
            console.log(message);
        }
        
        window.addEventListener('load', () => {
            log('Страница загружена');
            
            try {
                if (typeof GraphManager === 'function') {
                    log('✅ GraphManager загружен');
                    
                    // Даем время на создание DOM
                    setTimeout(() => {
                        try {
                            const gm = new GraphManager();
                            log('✅ GraphManager создан');
                            
                            // Проверяем кнопку
                            const button = document.getElementById('graphManagerButton');
                            if (button) {
                                log('✅ Кнопка найдена');
                                button.onclick = () => {
                                    log('Кнопка нажата!');
                                    gm.toggleChat();
                                };
                            }
                            
                        } catch (error) {
                            log('❌ Ошибка создания GraphManager: ' + error.message);
                        }
                    }, 100);
                    
                } else {
                    log('❌ GraphManager не загружен');
                }
            } catch (error) {
                log('❌ Ошибка: ' + error.message);
            }
        });
    </script>
</body>
</html>